

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Navigating with Jackal &mdash; jackal_tutorials 0.5.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/clearpath.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="jackal_tutorials 0.5.1 documentation" href="index.html" />
    <link rel="next" title="Setting Up Jackal’s Network" href="network.html" />
    <link rel="prev" title="Simulating Jackal" href="simulation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="network.html" title="Setting Up Jackal’s Network"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="simulation.html" title="Simulating Jackal"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">jackal_tutorials 0.5.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="navigating-with-jackal">
<h1>Navigating with Jackal<a class="headerlink" href="#navigating-with-jackal" title="Permalink to this headline">¶</a></h1>
<p>Below are the example launch files for three different configurations for navigating Jackal:</p>
<ul class="simple">
<li>Navigation in an odometric frame without a map, using only <a class="reference external" href="http://wiki.ros.org/move_base">move_base</a>.</li>
<li>Generating a map using <a class="reference external" href="http://wiki.ros.org/gmapping">gmapping</a>.</li>
<li>Localization with a known map using <a class="reference external" href="http://wiki.ros.org/amcl">amcl</a>.</li>
</ul>
<p>If you&#8217;re using <a class="reference internal" href="simulation.html"><em>simulation</em></a>, bring up Jackal with the front laser enabled for the
following demos:</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_gazebo jackal_world.launch config:<span class="o">=</span>front_laser
</pre></div>
</div>
<p>If you&#8217;re working with a real Jackal, it&#8217;s suggested to connect via SSH and launch the <a class="reference external" href="http://wiki.ros.org/jackal_navigation">jackal_navigation</a>
launchfiles from on board the robot. You&#8217;ll need to have bidirectional communication with the robot&#8217;s
roscore in order to launch <a class="reference external" href="http://wiki.ros.org/rviz">rviz</a> on your workstation (see <a class="reference internal" href="network.html#remote"><em>Remote ROS Connection</em></a>).</p>
<div class="section" id="navigation-without-a-map">
<h2>Navigation Without a Map<a class="headerlink" href="#navigation-without-a-map" title="Permalink to this headline">¶</a></h2>
<p>In the odometry <a class="reference external" href="http://wiki.ros.org/navigation">navigation</a> demo Jackal attempts to reach a given goal in the world to within a specified
tolerance. The 2D navigation, generated by <a class="reference external" href="http://wiki.ros.org/move_base">move_base</a>, takes in information from odometry, laser scanner,
and a goal pose and outputs safe velocity commands. In this demo the configuration of move_base is set for navigation
without a map in an odometric frame (that is, without reference to a map).</p>
<p>To launch the navigation demo, run:</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_navigation odom_navigation_demo.launch
</pre></div>
</div>
<p>To visualize with the suggested rviz configuration launch:</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_viz view_robot.launch config:<span class="o">=</span>navigation
</pre></div>
</div>
<img alt="rviz with Jackal's odom navigation configuration." src="_images/rviz-odom-navigation.png" />
<p>To send goals to the robot, select the <em>2D Nav Goal</em> tool from the top toolbar, and then click anywhere in the rviz
view to set the position. Alternatively, click and drag slightly to set the goal position and orientation.</p>
<p>If you wish to customize the parameters of move_base, local costmap, global costmap and base_local_planner, clone
<a class="reference external" href="http://wiki.ros.org/jackal_navigation">jackal_navigation</a> into your own workspace and modify the corresponding files in the <cite>params</cite> subfolder.</p>
</div>
<div class="section" id="making-a-map">
<h2>Making a Map<a class="headerlink" href="#making-a-map" title="Permalink to this headline">¶</a></h2>
<p>In this demonstration, Jackal generates a map using <a class="reference external" href="http://wiki.ros.org/gmapping">gmapping</a>. Begin by launching the gmapping launch file
on the robot:</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_navigation gmapping_demo.launch
</pre></div>
</div>
<p>And on your workstation, launch rviz with the suggested configuration:</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_viz view_robot.launch config:<span class="o">=</span>gmapping
</pre></div>
</div>
<img alt="rviz with Jackal's gmapping configuration." src="_images/rviz-gmapping.png" />
<p>You must slowly drive Jackal around to build the map. As obstacles come into view of the laser scanner, they will be
added to the map, which is shown in rviz. You can either drive manually using the interactive markers, or
semi-autonomously by sending navigation goals (as above).</p>
<p>When you&#8217;re satisfied, you can save the produced map using <a class="reference external" href="http://wiki.ros.org/map_server#map_saver">map_saver</a>:</p>
<div class="highlight-bash"><div class="highlight"><pre>rosrun map_server map_saver -f mymap
</pre></div>
</div>
<p>This will create a <tt class="docutils literal"><span class="pre">mymap.yaml</span></tt> and <tt class="docutils literal"><span class="pre">mymap.pgm</span></tt> file in your current directory.</p>
</div>
<div class="section" id="navigation-with-a-map">
<h2>Navigation With a Map<a class="headerlink" href="#navigation-with-a-map" title="Permalink to this headline">¶</a></h2>
<p>Using <a class="reference external" href="http://wiki.ros.org/amcl">amcl</a>, Jackal is able to globally localize itself in a known map. AMCL takes in information
from odometry, laser scanner and an existing map and estimates the robot&#8217;s pose.</p>
<p>To start the AMCL demo:</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_navigation amcl_demo.launch <span class="o">[</span>map_file:<span class="o">=</span>/path/to/my/map.yaml<span class="o">]</span>
</pre></div>
</div>
<p>If you don&#8217;t specify <tt class="docutils literal"><span class="pre">map_file</span></tt>, it defaults to an included pre-made map of the default &#8220;Jackal Race&#8221;
environment which Jackal&#8217;s simulator spawns in. If you&#8217;re using a real Jackal in your own environment,
you&#8217;ll definitely want to override this with the map created using the gmapping demo.</p>
<p>Before navigating, you need to initialize the localization system by setting the pose of the robot in the map.
This can be done using 2D Pose Estimate in rviz or by setting the amcl initial_pose parameters. To visualize
with the suggested rviz configuration launch:</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_viz view_robot.launch config:<span class="o">=</span>localization
</pre></div>
</div>
<p>When rviz appears, select the <em>Set 2D Pose tool</em> from the toolbar, and click on the map to indicate to the robot
approximately where it is.</p>
</div>
<div class="section" id="advanced">
<h2>Advanced<a class="headerlink" href="#advanced" title="Permalink to this headline">¶</a></h2>
<p>If you have an application which requires faster or more accurate SLAM capabilities, our commercial offerings
may be a good fit for your team. Please <a class="reference external" href="http://www.clearpathrobotics.com/contact/">get in touch for more details</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h4>Contents</h4>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation.html">Simulating Jackal</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Navigating with Jackal</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="network.html">Setting Up Jackal&#8217;s Network</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="startup.html">Extending Jackal&#8217;s Startup</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Calibrating Jackal&#8217;s IMU</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="update.html">Keeping Jackal Updated</a><ul class="simple">
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/navigation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="network.html" title="Setting Up Jackal’s Network"
             >next</a> |</li>
        <li class="right" >
          <a href="simulation.html" title="Simulating Jackal"
             >previous</a> |</li>
        <li><a href="index.html">jackal_tutorials 0.5.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Clearpath Robotics.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>